<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" type="text/css" href="/css/styles.css">
</head>
<body>
    <h3>Welcome to Your Business' Dashboard </h3>

<a href="/businessSell/<%= query %>">Upload new product(s)</a><br>
<a href="/businessBrowse/businessBrowseView">Browse materials</a><br>
<br>
Your company: <%= query %>'s wallet Currently has: <%= tokens %> tokens

<h3>Buy more tokensðŸ’ </h3>
Rate: <br>
1ðŸ’  = 20Tsh <br>
<h4>how many tokens do you want to buy?</h4>
<form action="/businessDashboard/<%= query %>" method="post" onsubmit="return validateForm()">
<input type="number" name="token" id="tokenInput" required oninput="calculatePrice()">
<button value="submit">BUY</button>
</form>

Price: <span id="priceDisplay">0 Tsh</span>

<script>
    function validateForm() {
        var tokenInput = document.getElementById('tokenInput').value;

        //checking if the input is valid
        if (isNaN(tokenInput) || tokenInput === ''){
            alert('Please enter a valid number of tokens');
            return false;//this prevents the form submission
        }

        return true; //this allows form submission
    }

    function calculatePrice() {
        var tokenInput = document.getElementById('tokenInput').value;
        var price = tokenInput * 20;
        var priceDisplay = document.getElementById('priceDisplay');
        priceDisplay.textContent = price + 'Tsh'
    }
</script>
     
</body>
</html>
